<!--
  =========================
  Blog Embed Include
  =========================
  This Jekyll include renders a styled card for embedding external blog posts or articles.
  Usage: {% raw %}{% include blog-embed.html url="..." title="..." site="..." author="..." date="..." img="..." alt="..." %}{% endraw %}
  For more on Jekyll includes: https://jekyllrb.com/docs/includes/
  For Liquid templating: https://shopify.github.io/liquid/
-->

<div class="blog-embed-card" style="background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 12px; padding: 0; margin: 18px 0; box-shadow: 0 2px 8px rgba(0,0,0,0.04); max-width: 420px; overflow: hidden;">
  <!--
    The entire card is a link to the external blog post.
    rel="noopener" is used for security: https://web.dev/external-anchors-use-rel-noopener/
  -->
  <a href="{{ include.url }}" target="_blank" rel="noopener" style="color: inherit; text-decoration: none; display: block;">
    {% if include.img %}
      <!--
        Optional image for the blog post, if provided.
        loading="lazy" improves performance: https://developer.mozilla.org/en-US/docs/Web/Performance/Lazy_loading
      -->
      <div style="width: 100%; background: #f8f9fa; display: flex; align-items: center; justify-content: center; padding: 14px 0 10px 0;">
        <img src="{{ include.img }}" alt="{{ include.alt | default: include.url }}" style="width: 92%; display: block; object-fit: contain; border-radius: 8px; box-shadow: 0 1px 6px rgba(0,0,0,0.06);" loading="lazy" />
      </div>
    {% endif %}
    <div class="blog-embed-meta" style="padding: 18px 18px 16px 18px; background: #f8f9fa;">
      {% if include.title %}
        <!--
          Blog post title.
        -->
        <div class="blog-embed-title" style="font-weight: bold; font-size: 1.13em; margin-bottom: 6px; color: #222;">
          {{ include.title }}
        </div>
      {% endif %}
      {% if include.site or include.author or include.date %}
        <!--
          Blog site, author, and date metadata.
          If the author matches a person in site.people, link to their profile.
        -->
        <div style="font-size: 0.98em; color: #666; margin-bottom: 4px;">
          {% if include.site %}<span class="blog-embed-site" style="color: #007acc;">{{ include.site }}</span>{% endif %}
          {% if include.author %} by
            {% assign matched_person = nil %}
            {% for person in site.people %}
              {% if person.name == include.author %}
                {% assign matched_person = person %}
                {% break %}
              {% endif %}
            {% endfor %}
            {% if matched_person %}
              <a href="{{ matched_person.url | relative_url }}" class="blog-embed-author" style="color: #007acc; text-decoration: underline;">{{ include.author }}</a>
            {% else %}
              <span class="blog-embed-author">{{ include.author }}</span>
            {% endif %}
          {% endif %}
          {% if include.date %} , <span class="blog-embed-date">{{ include.date }}</span>{% endif %}
        </div>
      {% endif %}
      {% unless include.img %}
        <!--
          If no image is provided, show the URL as a link.
        -->
        <span class="blog-embed blog-embed-link" style="color: #007acc; word-break: break-all;">{{ include.url }}</span>
      {% endunless %}
    </div>
  </a>
</div>
